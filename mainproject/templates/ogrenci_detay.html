{% extends "layout_admin.html" %}
{% load static %}

{% block title %}{{ ogrenci.ad_soyad }} | Öğrenci Detay{% endblock %}
{% block content %}
    <!-- Main Content -->
    <div class="main-panel">
        <div class="section-box">
            <div class="d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center mb-4">
                <h2 class="mb-3 mb-md-0">{{ ogrenci.ad_soyad }}</h2>
                <a href="{% url 'ogrenci_listesi' %}" class="btn btn-outline-secondary">
                    <i class="fas fa-arrow-left me-2"></i>Listeye Dön
                </a>
            </div>
            
            <div class="row g-4">
                <!-- Sol Panel - Öğrenci Bilgileri -->
                <div class="col-lg-4">
                    <div class="card h-100">
                        <div class="card-header bg-primary text-white">
                            <h5 class="mb-0">Öğrenci Profili</h5>
                        </div>
                        <div class="card-body d-flex flex-column">
                            {% if ogrenci.profil_foto %}
                            <img src="{{ ogrenci.profil_foto.url }}" class="rounded-circle mb-3 mx-auto" style="width:150px;height:150px;object-fit:cover;">
                            {% else %}
                            <div class="bg-light rounded-circle mb-3 d-flex align-items-center justify-content-center mx-auto" style="width:150px;height:150px;">
                                <i class="fas fa-user fa-3x text-muted"></i>
                            </div>
                            {% endif %}
                            
                            <table class="table table-sm mb-4">
                                <tr><th>Seviye:</th><td>{{ ogrenci.get_seviye_display }}</td></tr>
                                <tr><th>Kayıt Tarihi:</th><td>{{ ogrenci.kayit_tarihi|date:"d.m.Y" }}</td></tr>
                                <tr><th>Mevcut Cüz:</th><td>{{ ogrenci.mevcut_cuz }}</td></tr>
                                <tr><th>Hedef Cüz:</th><td>{{ ogrenci.hedef_cuz }}</td></tr>
                                <tr><th>Puan:</th><td>
                                    <div class="progress" style="height: 20px;">
                                        <div class="progress-bar" role="progressbar" 
                                             style="width: {{ ogrenci.puan }}0%;" 
                                             aria-valuenow="{{ ogrenci.puan }}" 
                                             aria-valuemin="1" 
                                             aria-valuemax="10">
                                            {{ ogrenci.puan }}/10
                                        </div>
                                    </div>
                                </td></tr>
                            </table>
                            
                            <a href="{% url 'ogrenci_duzenle' ogrenci.id %}" class="btn btn-primary mt-auto">
                                <i class="fas fa-edit me-2"></i>Profili Düzenle
                            </a>
                        </div>
                    </div>
                </div>
                
                <!-- Sağ Panel - Özel Notlar -->
                <div class="col-lg-8">
                    <div class="card h-100">
                        <div class="card-header bg-secondary text-white">
                            <h5 class="mb-0">Özel Notlar</h5>
                        </div>
                        <div class="card-body d-flex flex-column">
                            <form method="POST" action="{% url 'ogrenci_not_ekle' ogrenci.id %}" class="flex-grow-1 d-flex flex-column">
                                {% csrf_token %}
                                <div class="mb-3 flex-grow-1">
                                    <textarea class="form-control h-100" name="ozel_not" placeholder="Öğrenci hakkında notlarınızı buraya yazın...">{% if ogrenci.ozel_notlar %}{{ ogrenci.ozel_notlar }}{% endif %}</textarea>
                                </div>
                                <button type="submit" class="btn btn-primary align-self-start">Notları Kaydet</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        @media (max-width: 768px) {
            .card {
                margin-bottom: 1.5rem;
            }
            
            .progress {
                height: 16px !important;
            }
            
            .card-header h5 {
                font-size: 1.1rem;
            }
            
            .card-body img, .card-body div[style*="width:150px"] {
                width: 100px !important;
                height: 100px !important;
            }
        }
        
        @media (max-width: 576px) {
            .card-header h5 {
                font-size: 1rem;
            }
            
            .table-sm td, .table-sm th {
                padding: 0.3rem;
                font-size: 0.9rem;
            }
            
            .btn {
                padding: 0.375rem 0.75rem;
                font-size: 0.9rem;
            }
        }
    </style>
{% endblock %}
